
<%- include('../users/layouts/header.ejs')%>



<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    
    .container {
        background-color: #f1f1f1;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        text-align: center;
        padding: 20px;
        max-width: 100%;
        width: 450px;
    }
    
    .login-box {
        max-width: 300px;
        margin: 0 auto;
    }
    
    h1 {
        font-size: 24px;
    }
    
    .input-container {
        text-align: left;
        margin-bottom: 10px;
    }
    
    label {
        display: block;
        font-weight: bold;
    }
    
    input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    
    button {
        background-color: #EC7E3B;
        color: #fff;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        cursor: pointer;
        width: 100%;
        height: 40px;
        margin-top: 15px;
    }
    
    button:hover {
        background-color: #d2631e;
    }

    @media (max-width: 768px) {
        .container {
            width: 90%;
        }
    }

    @media (max-width: 576px) {
        .container {
            width: 100%;
            padding: 10px;
        }
        .input-container {
            margin-bottom: 5px;
        }
        .button {
            width: 100%;
            margin-top: 10px;
        }
    
        
    }
</style>
</head>
<body>
<div class="container">
    <div class="login-box">
        <h1>Registration</h1>
        <div id="error" style="color: red;"></div>
        <% if(typeof message !== 'undefined') { %>
            <p style="color: red; font-size: large; font-weight: 300;">
                <%= message %>
            </p>
        <% } %>

        <form action="/register" method="POST" id="form">
            <div class="input-container">
                <input type="text" id="Fname" name="Fname" placeholder="First Name">
                <p class="error-message" style="color: red;"></p>
            </div>
            <div class="input-container">
                <input type="text" id="Lname" name="Lname" placeholder="Last Name">
                <span class="error-message" style="color: red;"></span>
            </div>
            <div class="input-container">
                <input type="email" id="email" name="email" placeholder="Email">
                <p class="error-message" style="color: red; "></p>
            </div>
            <div class="input-container">
                <input type="text" id="mobile" name="mobile" placeholder="Mobile">
                <span class="error-message" style="color: red;"></span>
            </div>
            <div class="input-container">
                <input type="password" id="password" name="password" placeholder="Password">
                <span class="error-message" style="color: red;"></span>
            </div>
            <div class="input-container">
                <input type="password" id="Cpassword" name="Cpassword" placeholder="Confirm Password">
                <span class="error-message" style="color: red;"></span>
            </div>
            <button type="submit">Register</button>
            <div class="text-center">
                <p>Already Have an Account <a href="/login">Sign in</a></p>
            </div>
        </form>
    </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('form');
    const fnameInput = document.getElementById('Fname');
    const lnameInput = document.getElementById('Lname');
    const emailInput = document.getElementById('email');
    const mobileInput = document.getElementById('mobile');
    const passwordInput = document.getElementById('password');
    const cpasswordInput = document.getElementById('Cpassword');
    const errorMessages = document.querySelectorAll('.error-message');

    // Email regex pattern
    var emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;

    // Mobile number regex pattern
    var phoneRegex = /^(?!^(\d)\1{9}$)\d{10}$/;

    form.addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent form submission initially

        let isValid = true;
        errorMessages.forEach(function (element) {
            element.innerText = '';
            element.style.fontSize = '10px'; // Set the font size to 10px
        });

        if (fnameInput.value.trim() === '') {
            errorMessages[0].innerText = 'First Name is required.';
            isValid = false;
        }

        if (lnameInput.value.trim() === '') {
            errorMessages[1].innerText = 'Last Name is required.';
            isValid = false;
        }

        if (emailInput.value.trim() === '') {
            errorMessages[2].innerText = 'Email is required.';
            isValid = false;
        } else if (!emailRegex.test(emailInput.value.trim())) { // Check email format using regex
            errorMessages[2].innerText = 'Email is not valid. (e.g., example@gmail.com)';
            isValid = false;
        }

        if (mobileInput.value.trim() === '') {
            errorMessages[3].innerText = 'Mobile is required.';
            isValid = false;
        } else if (!phoneRegex.test(mobileInput.value.trim())) { // Check mobile format using regex
            errorMessages[3].innerText = 'Please enter a valid 10-digit mobile number.';
            isValid = false;
        }

        if (passwordInput.value.length < 5) {
            errorMessages[4].innerText = 'Password must be at least 5 characters long.';
            isValid = false;
        } else if (!/[^a-zA-Z0-9]/.test(passwordInput.value) || passwordInput.value.includes(' ')) {
            errorMessages[4].innerText = 'Password must contain at least one special character and cannot contain spaces.';
            isValid = false;
        }

        if (cpasswordInput.value === '') {
            errorMessages[5].innerText = 'Confirm Password is required.';
            isValid = false;
        } else if (cpasswordInput.value !== passwordInput.value) {
            errorMessages[4].innerText = 'Passwords do not match.';
            errorMessages[5].innerText = 'Passwords do not match.';
            isValid = false;
        }

        if (isValid) {
            // If everything is valid after the delay, submit the form
            form.submit();
        }
    });

    // Real-time validation
    const inputElements = [fnameInput, lnameInput, emailInput, mobileInput, passwordInput, cpasswordInput];

    inputElements.forEach((input, index) => {
        input.addEventListener('input', function () {
            errorMessages[index].innerText = '';
        });
    });

    passwordInput.addEventListener('input', function () {
        const passwordValue = passwordInput.value;
        errorMessages[4].innerText = '';

        if (passwordValue.length < 5) {
            errorMessages[4].innerText = 'Password must be at least 5 characters long.';
        } else if (!/[^a-zA-Z0-9]/.test(passwordValue) || passwordValue.includes(' ')) {
            errorMessages[4].innerText = 'Password must contain at least one special character and cannot contain spaces.';
        }
    });
});

</script>
    

<!-- ===============================================================setTimeout========================================================================== -->

    <script>
        setTimeout(function() {
          var messageElement = document.getElementById("message");
          if (messageElement) {
            messageElement.style.display = "none";
          }
        }, );
      </script>
    



<%- include('../users/layouts/footer.ejs')%>